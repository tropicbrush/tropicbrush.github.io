	<!DOCTYPE html>
<html class="h-100">
   <head>
      <meta charset="UTF-8" />
      <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
     
      <title>Auth0 Login Using SPA SDK</title>
      <link
         rel="stylesheet"
         href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
         />
      
      <link
         rel="stylesheet"
         href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/monokai-sublime.min.css"
         />
      <link
         rel="stylesheet"
         href="https://use.fontawesome.com/releases/v5.7.2/css/solid.css"
         integrity="sha384-r/k8YTFqmlOaqRkZuSiE9trsrDXkh07mRaoGBMoDcmA58OHILZPsk29i2BsFng1B"
         crossorigin="anonymous"
         />
      <link
         rel="stylesheet"
         href="https://use.fontawesome.com/releases/v5.7.2/css/fontawesome.css"
         integrity="sha384-4aon80D8rXCGx9ayDt85LbyUHeMWd3UiBaWliBlJ53yzm9hqN21A+o1pqoyK04h+"
         crossorigin="anonymous"
         />

      
       <style>
.hidden {
  display: none;
}
label {
  margin-bottom: 10px;
  display: block;
}

.navbar {
  min-height: 115px;
}
.nav-item {
  margin-right: 10px; /* Adjust the margin as needed */
}
</style>
       <style>

* {
	box-sizing: border-box;
}

input[type=text],
select,
textarea {
	width: 100%;
	padding: 12px;
	border: 1px solid #ccc;
	border-radius: 4px;
	resize: vertical;
}

label {
	padding: 12px 12px 12px 0;
	display: inline-block;
}

input[type=submit] {
	background-color: #04AA6D;
	color: white;
	padding: 12px 20px;
	border: none;
	border-radius: 4px;
	cursor: pointer;
	float: right;
}

input[type=submit]:hover {
	background-color: #45a049;
}

.container {
	border-radius: 5px;
	background-color: #f2f2f2;
	padding: 20px;
}
footer {
  flex-shrink: 0; /* Prevent the footer from shrinking */
}
	       

.col-25 {
	float: left;
	width: 25%;
	margin-top: 6px;
}

.col-75 {
	float: left;
	width: 75%;
	margin-top: 6px;
}

/* Clear floats after the columns */
.row:after {
	content: "";
	display: table;
	clear: both;
}
body {
  display: flex;
  flex-direction: column;
  min-height: 100vh; /* Ensure the body takes up the full viewport height */
}

#app {
  flex: 1; /* Allow the main content to grow and take up remaining space */
}
	       
/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */
@media screen and (max-width: 600px) {

	.col-25,
	.col-75,
	input[type=submit] {
		width: 100%;
		margin-top: 0;
	}
}

.advanced-options {
	display: none;
	/* Initially hidden */
	border: 1px solid #ccc;
	padding: 20px;
	border-radius: 5px;
	margin-top: 20px;
}

.form-options {
	/* Initially hidden */
	border: 1px solid #ccc;
	padding: 20px;
	border-radius: 5px;
	margin-top: 20px;
}


.advanced-options h3 {
	margin-top: 0;
}

.advanced-options-toggle {
	margin-bottom: 10px;
}

	       
</style>
       
       
       
   </head>
   <body class="h-100">
	   
      <div id="app" class="flex-grow-1 d-flex flex-column">
         <div class="nav-container">
            <nav class="navbar navbar-expand-md navbar-light bg-light">
               <div class="container">
                  <div class="navbar-brand logo"></div>
                  <button
                     class="navbar-toggler"
                     type="button"
                     data-toggle="collapse"
                     data-target="#navbarNav"
                     aria-controls="navbarNav"
                     aria-expanded="false"
                     aria-label="Toggle navigation"
                     >
                  <span class="navbar-toggler-icon"></span>
                  </button>
                  <div class="collapse navbar-collapse" id="navbarNav">
                     <ul class="navbar-nav mr-auto">
                        <li class="nav-item">
                           <a href="/" class="route-link btn btn-primary btn-margin">Home</a>
                        </li>
			     <li class="nav-item">
			     <a href="/profile" class="btn btn-primary btn-margin auth-visible hidden route-link">Profile</a>
				       </li>
				     <li class="nav-item">
			  <a href="#"  id="qsLogoutBtn"  onclick="logout()" class="btn btn-primary btn-margin auth-visible hidden route-link">Log Out</a>
					       </li>
                     </ul>
                     <ul class="navbar-nav d-none d-md-block">
                 
                        <li class="nav-item auth-visible hidden">

                              <img
                                 alt="Profile picture"
                                 class="nav-user-profile profile-image rounded-circle"
                                 width="50"
                                 />
                          
                        </li>
                     
                     </ul>
                   
                  </div>
               </div>
            </nav>
         </div>
<!--          <div id="main-content" class="container mt-5 flex-grow-1"> -->
         <div id="main-content">
            <div id="content-home" class="page">
		   
               <div class="container form-options">
		        <h2>How to Use</h2>
    <ol>
        <li>Enter your tenant domain name and client id.(optionally any additional parameters from the Advanced section.)</li>
	    <b>Note:</b> You will need to add https://tropicbrush.github.io in the "Allowed Callback URLs", "Allowed Logout URLs" and "Allowed Web Origins" in the client in Auth0.
        <li>Click "Initialize Auth0 Client". (This will initaite the Auth0 SDK client with the parameters provided in the form.)</li>
        <li>Click "Login".</li>
        <li>Once logged in, you will see "Profile" and "Logout" buttons.</li>
        <li>Click "Profile" to check User Profile, ID Token and AT content.</li>
        <li>Click "Logout" to logout user or if you want to change initialization parameters.</li>
      
      
    </ol>
                  <form id="auth0-form">
		   <div class="form-options">
			  <div class="row">
                        <div class="col-25">
                           <label for="domain">Auth0 Domain <span style="color: red;">*</span>:</label>				
                           </div>
                        <div class="col-75">
                           <input type="text" id="domain" name="domain" required value="abhishek-customers.us.auth0.com">
                        </div>
                        </div>
                     <div class="row">
                        <div class="col-25">
                           <label for="clientId">Client ID <span style="color: red;">*</span>:</label>
                        </div>
                        <div class="col-75">
                           <input type="text" id="clientId" name="clientId" required value="y12dT3aFnRArFWcUSeLZqsONNihvggGF">
                        </div>
                        </div>
                         
                     <div class="advanced-options-toggle">
                        <label for="advanced-options-checkbox">Show Advanced Options</label>
                        <input type="checkbox" id="advanced-options-checkbox">
                     </div>
                     <div class="advanced-options">
                        <h4>Advanced Options</h4>
                        <div class="row">
                           <div class="col-25">
                              <label for="useRefreshTokens">useRefreshTokens</label>
                           </div>
                           <div class="col-75">
                              <select id="useRefreshTokens" name="useRefreshTokens">
                                 <option value="">Select an option</option>
                                 <option value="true">true</option>
                                 <option value="false">false</option>
                              </select>
                           </div>
                        </div>
                        <div class="row">
                           <div class="col-25">
                              <label for="scopes">scopes:</label>
                           </div>
                           <div class="col-75">
                              <input type="text" id="scopes" name="scopes" value="openid email profile">
                           </div>
                        </div>
                        <div class="row">
                           <div class="col-25">
                              <label for="audience">audience:</label>
                           </div>
                           <div class="col-75">
                              <input type="text" id="audience" name="audience" placeholder="API Identifier" >
                           </div>
                        </div>
                        <div class="row">
                           <div class="col-25">
                              <label for="connection">connection:</label>
                           </div>
                           <div class="col-75">
                              <input type="text" id="connection" name="connection" placeholder="Connection name in Auth0">
                           </div>
                        </div>
                        <div class="row">
                           <div class="col-25">
                              <label for="display">display</label>
                           </div>
                           <div class="col-75">
                              <select id="display" name="display">
                                 <option value="">Select an option</option>
                                 <option value="page">page</option>
                                 <option value="popup">popup</option>
                                 <option value="touch">touch</option>
                                 <option value="touch">wap</option>
                              </select>
                           </div>
                        </div>
                        <div class="row">
                           <div class="col-25">
                              <label for="invitation">invitation:</label>
                           </div>
                           <div class="col-75">
                              <input type="text" id="invitation" name="invitation"  >
                           </div>
                        </div>
                        <div class="row">
                           <div class="col-25">
                              <label for="login_hint">login_hint:</label>
                           </div>
                           <div class="col-75">
                              <input type="text" id="login_hint" name="login_hint"  placeholder="email address">
                           </div>
                        </div>
                        <div class="row">
                           <div class="col-25">
                              <label for="max_age">max_age:</label>
                           </div>
                           <div class="col-75">
                              <input type="text" id="max_age" name="max_age" placeholder="entering 0 would force user to authenticate irrespective of current session" >
                           </div>
                        </div>
                        <div class="row">
                           <div class="col-25">
                              <label for="organization">organization:</label>
                           </div>
                           <div class="col-75">
                              <input type="text" id="organization" name="organization" placeholder="Enter Auth0 organization name">
                           </div>
                        </div>
                        <div class="row">
                           <div class="col-25">
                              <label for="prompt">prompt</label>
                           </div>
                           <div class="col-75">
                              <select id="prompt" name="prompt">
                                 <option value="">Select an option</option>
                                 <option value="login">login</option>
                                 <option value="none">none</option>
                                 <option value="touch">consent</option>
                                 <option value="touch">select_account</option>
                              </select>
                           </div>
                        </div>
                        <div class="row">
                           <div class="col-25">
                              <label for="screen_hint">screen_hint</label>
                           </div>
                           <div class="col-75">
                              <select id="screen_hint" name="screen_hint">
                                 <option value="">Select an option</option>
                                 <option value="login">login</option>
                                 <option value="signup">signup</option>
                              </select>
                           </div>
                        </div>
                        <div class="row">
                           <div class="col-25">
                              <label for="ui_locales">ui_locales:</label>
                           </div>
                           <div class="col-75">
                              <input type="text" id="ui_locales" name="ui_locales" placeholder="e.g en">
                           </div>
                        </div>
                        <div class="additional-fields">
                        <!-- Dynamically added fields will go here -->
                    </div>
                    <!-- Button to add more fields -->
                    <button type="button" id="addFieldButton">Add More Fields</button>
                     </div>
                     <br>
                     <button id="initBtn" class="btn btn-primary btn-margin" type="submit">Initialize Auth0 Client</button>
			<button
                              id="qsLoginBtn"
                              onclick="login()"
                              class="btn btn-primary btn-margin auth-invisible hidden" 
			       disabled
                              >
                           Log in
                           </button>
			  <a href="/profile" class="btn btn-primary btn-margin auth-visible hidden route-link">Profile</a>
			  <a href="#"  id="qsLogoutBtn"  onclick="logout()" class="btn btn-primary btn-margin auth-visible hidden route-link">Log Out</a>
			
                             <!-- 			  <a href="/profile" class="btn btn-primary btn-margin" disabled = true>Go to Profile</a> -->
<!-- 			  <button id="profile-btn" class="btn btn-primary btn-margin auth-visible hidden" data-href="/profile">Go to Profile</button> -->

		   </div>
                  </form>
		                           
                           
                        
               </div>
            </div>
            <script>
// 		    document.addEventListener("DOMContentLoaded", function() {
//   const profileBtn = document.getElementById("profile-btn");

//   profileBtn.addEventListener("click", function() {
//     // Get the href attribute of the button
//     const href = profileBtn.getAttribute("data-href");
    
//     // Navigate to the URL
//     window.location.href = href;
//   });
// });

		    
		        let fieldCounter = 1;
               document.addEventListener('DOMContentLoaded', function() {
               const checkbox = document.getElementById('advanced-options-checkbox');
               const advancedOptions = document.querySelector('.advanced-options');
               
               // Initially hide advanced options
               advancedOptions.style.display = 'none';
               
               // Toggle visibility of advanced options when checkbox is clicked
               checkbox.addEventListener('change', function() {
               advancedOptions.style.display = checkbox.checked ? 'block' : 'none';
               });

		  // Counter for dynamic field IDs
    

        // Function to create new input fields
        function createField() {
            const container = document.querySelector('.additional-fields');
            const newRow = document.createElement('div');
            newRow.classList.add('row');
            newRow.innerHTML = `
                <div class="col-25">
                    <label for="key${fieldCounter}">Key:</label>
                    <input type="text" id="key${fieldCounter}" name="key${fieldCounter}">
                </div>
                <div class="col-75">
                    <label for="value${fieldCounter}">Value:</label>
                    <input type="text" id="value${fieldCounter}" name="value${fieldCounter}">
                </div>
            `;
            container.appendChild(newRow);
            fieldCounter++;
        }

        // Event listener for the add field button
        const addFieldButton = document.getElementById('addFieldButton');
        addFieldButton.addEventListener('click', createField);
		       
               });

		// document.addEventListener('DOMContentLoaded', function() {
      
  //   });
               
                
                
               let currentDomain = localStorage.getItem('auth0_domain');
               let currentClient = localStorage.getItem('auth0_client_id'); 
               
               let useRefreshTokens = localStorage.getItem('useRefreshTokens');
               let scopes = localStorage.getItem('scopes'); 
                let audience = localStorage.getItem('audience');
               let connection = localStorage.getItem('connection');
                let display = localStorage.getItem('display');
               let invitation = localStorage.getItem('invitation');
                let login_hint = localStorage.getItem('login_hint');
               let max_age = localStorage.getItem('max_age');
                let organization = localStorage.getItem('organization');
               let prompt = localStorage.getItem('prompt');
                let screen_hint = localStorage.getItem('screen_hint');
               let ui_locales = localStorage.getItem('ui_locales'); 
                
               
                const domainValueInput = document.getElementById('domain');
                const clientIdValueInput = document.getElementById('clientId');
                
                domainValueInput.value = currentDomain || 'abhishek-customers.us.auth0.com'; 
                clientIdValueInput.value = currentClient || 'y12dT3aFnRArFWcUSeLZqsONNihvggGF'; 
                const auth0Form = document.getElementById('auth0-form');
                
               auth0Form.addEventListener('submit', async (event) => {
               event.preventDefault();


				const formData = new FormData(auth0Form);
				console.log("formData",formData)

			        const domain = formData.get('domain');
		               const clientId = formData.get('clientId');
		               
		               const useRefreshTokens = formData.get('useRefreshTokens');
		               const scopes = formData.get('scopes');
		               const audience = formData.get('audience');
		               const connection = formData.get('connection');
		               const display = formData.get('display');
		               const invitation = formData.get('invitation');
		               const login_hint = formData.get('login_hint');
		               const max_age =formData.get('max_age');
		               const organization = formData.get('organization');
		               const prompt = formData.get('prompt');
		               const screen_hint = formData.get('screen_hint');
		               const ui_locales = formData.get('ui_locales');

		       
		               // const domain = document.getElementById('domain').value;
		               // const clientId = document.getElementById('clientId').value;
		               
		               // const useRefreshTokens = document.getElementById('useRefreshTokens').value;
		               // const scopes = document.getElementById('scopes').value;
		               // const audience = document.getElementById('audience').value;
		               // const connection = document.getElementById('connection').value;
		               // const display = document.getElementById('display').value;
		               // const invitation = document.getElementById('invitation').value;
		               // const login_hint = document.getElementById('login_hint').value;
		               // const max_age = document.getElementById('max_age').value;
		               // const organization = document.getElementById('organization').value;
		               // const prompt = document.getElementById('prompt').value;
		               // const screen_hint = document.getElementById('screen_hint').value;
		               // const ui_locales = document.getElementById('ui_locales').value;
		
				 const additionalFields = {};
				    
		        for (let i = 1; i < fieldCounter; i++) {
		            const key = formData.get(`key${i}`);
		            const value = formData.get(`value${i}`);
			console.log("key :",key)
				console.log("value :",value)
		            additionalFields[key] = value;
			    localStorage.setItem("cust_field_" +key,value);
				console.log("localStorage response :",localStorage.getItem("cust_field_" +key))
		        }
				       
		               
		               
		               localStorage.setItem('auth0_domain',domain);
		               localStorage.setItem('auth0_client_id',clientId);
		               
		               localStorage.setItem('useRefreshTokens',useRefreshTokens);
		               localStorage.setItem('scopes',scopes);
		                localStorage.setItem('audience',audience);
		               localStorage.setItem('connection',connection);
		               localStorage.setItem('display',display);
		               localStorage.setItem('invitation',invitation);
		               localStorage.setItem('login_hint',login_hint);
		               localStorage.setItem('max_age',max_age);
		               localStorage.setItem('organization',organization);
		               localStorage.setItem('prompt',prompt);
		               localStorage.setItem('screen_hint',screen_hint);
		               localStorage.setItem('ui_locales',ui_locales);
		               
		               
		               // initializeAuth0Client(domain, clientId);
		               await configureClient();
		       document.getElementById("qsLoginBtn").removeAttribute("disabled");
		       document.getElementById("profile-btn").removeAttribute("disabled");
		      
               });
            </script>
            <div class="page" id="content-profile">
               <div class="container">
                  <div class="row align-items-center profile-header">
                     <div class="col-md-2">
                        <img
                           alt="User's profile picture"
                           class="rounded-circle img-fluid profile-image mb-3 mb-md-0"
                           />
                     </div>
                     <div class="col-md">
                        <h2 class="user-name"></h2>
                        <p class="lead text-muted user-email"></p>
                     </div>
                  </div>
                  <div class="row">
                     <label for="profile-data">User Profile Data</label>
                     <pre class="rounded">
                <code id="profile-data" class="json"></code></pre>
                  </div>
                  <div class="row">
                     <label for="idToken-data">ID Token Data</label>
                     <pre class="rounded">
                <code id="idToken-data" class="json"></code></pre>
                  </div>
                  <div class="row">
                     <label for="idToken-decoded-data">Decoded ID Token Data</label>
                     <pre class="rounded">
                <code id="idToken-decoded-data" class="json"></code></pre>
                  </div>
                  <div class="row">
                     <label for="accessToken-data">Access Token Data</label>
                     <pre class="rounded">
                <code id="accessToken-data" class="json"></code></pre>
                  </div>
                  <div class="row">
                     <label for="accessToken-decoded-data">Decoded Access Token</label>
                     <pre class="rounded">
                <code id="accessToken-decoded-data" class="json"></code></pre>
                  </div>
               </div>
            </div>
         </div>
         <footer class="bg-light text-center p-5">
            <div class="logo"></div>
            <p>
               Sample project provided by @Tropicbrush
                         </p>
         </footer>
      </div>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
      <script src="https://cdn.auth0.com/js/auth0-spa-js/2.0/auth0-spa-js.production.js"></script>
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
      <script src="/public/js/ui.js"></script>
      <script src="/public/js/app.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/jwt-decode@4.0.0/build/cjs/index.min.js"></script>
<!--       <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Counter for dynamic field IDs
        let fieldCounter = 1;

        // Function to create new input fields
        function createField() {
            const container = document.querySelector('.additional-fields');
            const newRow = document.createElement('div');
            newRow.classList.add('row');
            newRow.innerHTML = `
                <div class="col-25">
                    <label for="key${fieldCounter}">Key:</label>
                    <input type="text" id="key${fieldCounter}" name="key${fieldCounter}">
                </div>
                <div class="col-75">
                    <label for="value${fieldCounter}">Value:</label>
                    <input type="text" id="value${fieldCounter}" name="value${fieldCounter}">
                </div>
            `;
            container.appendChild(newRow);
            fieldCounter++;
        }

        // Event listener for the add field button
        const addFieldButton = document.getElementById('addFieldButton');
        addFieldButton.addEventListener('click', createField);
    });
</script> -->
   </body>
</html>
